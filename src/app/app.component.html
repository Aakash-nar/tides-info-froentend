<mat-toolbar color="primary">
  <mat-toolbar-row>
    <span>Tide Tracker</span>
    <span class="spacer"></span>
    <button
      mat-icon-button
      (click)="clearCache()"
      matTooltip="Clear location cache"
    >
      <mat-icon>refresh</mat-icon>
    </button>
  </mat-toolbar-row>
</mat-toolbar>

<main class="container">
  <div *ngIf="loading" class="loading">
    <mat-spinner></mat-spinner>
    <p>Finding your location and tide information...</p>
  </div>

  <div *ngIf="error" class="error">
    <mat-icon color="warn">error_outline</mat-icon>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="ngOnInit()">
      Try Again
    </button>
  </div>

  <div *ngIf="!loading && !error">
    <app-tide-display
      [station]="nearestStation"
      [predictions]="tidePredictions"
    >
    </app-tide-display>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Tide Chart</mat-card-title>
        <mat-card-subtitle>Today's high and low tides</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <app-tide-chart
          [predictions]="tidePredictions"
          [hourlyPredictions]="hourlyPredictions"
        >
        </app-tide-chart>
      </mat-card-content>
    </mat-card>

    <mat-card class="suggestions-card">
      <mat-card-header>
        <mat-card-title>Best Times for Activities</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          <mat-list-item>
            <mat-icon matListItemIcon>directions_boat</mat-icon>
            <div matListItemTitle>Boating</div>
            <div matListItemLine>Best around high tide</div>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListItemIcon>beach_access</mat-icon>
            <div matListItemTitle>Beachcombing</div>
            <div matListItemLine>Best during low tide</div>
          </mat-list-item>
          <mat-list-item>
            <mat-icon matListItemIcon>fishing</mat-icon>
            <div matListItemTitle>Fishing</div>
            <div matListItemLine>Best during tide changes</div>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>
  </div>
</main>
